---
title: 工具类型
date: 2022-04-01 21:53:40
permalink: /pages/23d841/
categories:
  - TypeScript
tags:
  -
---

## 工具类型 (Utility Types)

`TypeScript` 提供了一些工具类型，方便进行类型上的转换。这些工具类型是全局可见的。

## Partial

构造一个新类型，使类型 `T`上的所有属性都变成可选的。

### 使用

```typescript
interface Person {
  name: string
  age: number
}

type PersonOptional = Partial<Person>

// 相当于
type PersonOptional = {
  name?: string
  age?: number
}
```

### 实现

```typescript
type Partial<T> = {
  [K in keyof T]?: T[K]
}
```

---

## Required

设置类型的所有属性为必须项。和 `Partial` 是相反的。

### 使用

```typescript
interface Person {
  name?: string
  age?: number
}

const Jack: Person = { name: 'Jack' }
const Lucy: Required<Person> = { name: 'Lucy' }

// Property 'age' is missing in type '{ name: string; }' but required in type 'Required<Person>'.(2741)
```

### 实现

```typescript
type Required<T> = {
  [K in keyof T]-?: T[K]
}
```

注意 `-?` 表示**非可选**，这里如果不加 `-?` 在遇到 `T` 的属性为可选时，就无法变成必选属性，这个就是指同态拷贝。

举个例子 🌰

```typescript
interface T {
  name: string
  age?: number
}

// 实现一个不使用 `-?` 的 Required
type Required<T> = {
  [K in keyof T]: T[K]
}

// Foo = { name: string, age?: number | undefined }
type Foo = Required<T>

// 添加 `-?`
type Required<T> = {
  [K in keyof T]-?: T[K]
}

// Foo = { name: string, age: number }
type Foo = Required<T>
```

## 参考

- [TypeScript 入门教程 - 声明合并](https://ts.xcatliu.com/advanced/declaration-merging.html)
